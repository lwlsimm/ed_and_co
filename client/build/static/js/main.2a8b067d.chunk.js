(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{20:function(e,t,a){},26:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){},66:function(e,t,a){},84:function(e,t,a){},85:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){},92:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a.n(c),s=a(21),r=a.n(s),i=(a(47),a(48),a(49),a(7)),o=a(2),l=a(0),d=function(){var e=Object(o.c)((function(e){return e.loginReducer})),t=Object(i.f)();return Object(l.jsxs)("div",{className:"navbar",children:[Object(l.jsxs)("div",{className:"leftNavText",onClick:function(){return t.push("/")},children:[Object(l.jsx)("h1",{className:"navHeader",children:"Edward & Co."}),Object(l.jsx)("h3",{className:"navQuote",children:"Antique Typerwriters"})]}),Object(l.jsxs)("div",{className:"rightNavText",children:[Object(l.jsx)("button",{className:"navBtn",onClick:function(){return t.push("/about")},children:"About Us"}),e?Object(l.jsx)("button",{onClick:function(){return t.push("/account")},className:"navBtn",children:"My Account"}):Object(l.jsxs)("button",{onClick:function(){return t.push("/login")},className:"navBtn",children:["Login ",Object(l.jsx)("br",{})," /Register"]}),Object(l.jsxs)("button",{onClick:function(){return t.push("/basket")},className:"navBtn",children:[Object(l.jsx)("i",{className:"fas fa-shopping-basket fa-1x"}),"Basket"]})]})]})},u=a(3),j=a.n(u),b=a(6),p=a(4),h=(a(61),function(e){return{type:"cart/incrementCartItem",payload:e}}),m=function(e){return{type:"cart/decrementCartItem",payload:e}},O=function(e){return{type:"stock/loadStock",payload:e}},x=function(e){return{type:"token/addTokens",payload:e}},f=function(e){return{type:"amountToPay/update",payload:e}},v=function(e){var t=Object(c.useState)(0),a=Object(p.a)(t,2),n=a[0],s=a[1],r=e.product,d=e.mode,u=Object(o.b)(),j=Object(i.f)(),b="/".concat(r.id),m=Object(o.c)((function(e){return e.cartReducer}));Object(c.useEffect)((function(){if(m.some((function(e){return e.id===r.id}))){var e=m.filter((function(e){return e.id===r.id}))[0];s(e.qty)}}),[]);var O,x=function(){if(m.some((function(e){return e.id===r.id}))){var e=m.filter((function(e){return e.id===r.id}))[0],t=e.qty+1;e.qty=t,s(t),u(h(e))}else{s(1);var a={id:r.id,qty:1};u({type:"cart/addNewCartItem",payload:a})}};return"ProductPage"===d&&(O={display:"none"}),Object(l.jsxs)("div",{className:"typewriter",children:[Object(l.jsxs)("div",{className:"sf-img-container",style:O,children:[Object(l.jsxs)("button",{onClick:function(){j.push(b)},className:"sf-more-info",style:O,children:["More ",Object(l.jsx)("br",{}),"Info"]}),Object(l.jsx)("img",{className:"sf-image",src:r.image,alt:r.title,style:O})]}),Object(l.jsxs)("h3",{className:"sf-title",style:O,children:[r.title," - \xa3",r.price]}),Object(l.jsxs)("p",{children:["Items in Stock: ",r.quantity-n]}),n<r.quantity?Object(l.jsx)("button",{onClick:function(){return x()},className:"sf-buybutton",children:"Add to Basket"}):Object(l.jsx)("button",{onClick:function(){return x()},className:"sf-buybutton btn-disabled",disabled:!0,children:"Out of Stock"})]},r.id)};a(62);a(63).config();var g=function(){var e=Object(o.c)((function(e){return e.stockReducer}));return Object(l.jsx)("div",{className:"shopFront",children:e.map((function(e){return Object(l.jsx)(v,{product:e,mode:"ShopFront"},e.id)}))})},N=a(30),y=(a(66),function(){var e=Object(o.c)((function(e){return e.stockReducer})),t=Object(c.useState)(0),a=Object(p.a)(t,2),n=a[0],s=a[1],r=e.length;if(!Array.isArray(e)||r<=0)return null;var i=function(){s(n===r-1?0:n+1)},d=function(){s(0===n?r-1:n-1)};return Object(l.jsx)("section",{className:"slider",children:e.map((function(t,a){return Object(l.jsx)("div",{className:a===n?"slide active":"slide",children:a===n&&Object(l.jsxs)("div",{className:"displayedSlide",children:[Object(l.jsx)(v,{product:e[a],mode:"Slider"}),Object(l.jsxs)("div",{className:"slideButtons",children:[Object(l.jsx)(N.a,{className:"arrow left-arrow",onClick:d}),Object(l.jsx)(N.b,{className:"arrow right-arrow",onClick:i})]})]})},a)}))})}),w="http://localhost:5500/api/stock",k="http://localhost:5500/api/customers/login",_="http://localhost:5500/api/account/myaccount",C="http://localhost:5500/api/account/password",S="http://localhost:5500/api/account/new_address",P="http://localhost:5500/api/account/delete_address",T="http://localhost:5500/api/account/update_address",R="http://localhost:5500/api/customers/register",q="http://localhost:5500/api/order",E="http://localhost:5500/api/order/single_order",B=a(8),D=a.n(B),I=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.loginReducer})),a=Object(o.c)((function(e){return e.tokenReducer})),n=Object(i.f)(),s=function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=a.accessToken,a.refreshToken,e.next=4,D()({method:"post",headers:{authorization:"Bearer ".concat(t)},url:_});case 4:if(!e.sent.data.basic_data){e.next=7;break}return e.abrupt("return",!0);case 7:return e.abrupt("return",!1);case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)(Object(b.a)(j.a.mark((function a(){var c,r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,D()(w);case 2:if(c=a.sent,e(O(c.data)),!t){a.next=19;break}return a.next=7,s();case 7:return r=a.sent,a.t0=console,a.next=11,r;case 11:return a.t1=a.sent,a.t0.log.call(a.t0,a.t1),a.next=15,!r;case 15:if(!a.sent){a.next=19;break}e({type:"login/logout"}),e({type:"token/delete"}),n.push("/");case 19:case"end":return a.stop()}}),a)}))),[]),Object(l.jsxs)(c.Fragment,{children:[Object(l.jsx)(g,{}),Object(l.jsx)(y,{})]})},A=(a(84),function(e){var t=e.match,a=Object(o.c)((function(e){return e.stockReducer}));console.log(a);var c=t.params.id,n=a.find((function(e){return e.id==c})),s=Object(i.f)();return Object(l.jsxs)("div",{className:"prod-page",children:[Object(l.jsxs)("div",{className:"prod-details",children:[Object(l.jsx)("h2",{className:"prod-header",children:n.title}),Object(l.jsxs)("h3",{className:"prod-price",children:["\xa3",n.price," "]}),Object(l.jsxs)("div",{className:"prod-main",children:[Object(l.jsx)("img",{className:"prod-image",src:n.image,alt:n.title}),Object(l.jsxs)("div",{children:[Object(l.jsx)("p",{className:"prod-desc",children:n.about}),Object(l.jsx)(v,{product:n,mode:"ProductPage"})]})]})]}),Object(l.jsxs)("button",{onClick:function(){return s.push("/")},className:"prod-back",children:[Object(l.jsx)("i",{className:"fas fa-home fa-1x"})," Home"]})]})}),L=a(13),F=(a(85),function(){return Object(l.jsxs)("div",{className:"aboutPage",children:[Object(l.jsx)("h2",{className:"aboutHeader",children:"About"}),Object(l.jsx)("p",{className:"aboutPara",children:"Thank you for visiting this website.  This is a dummy e-commerce app that I created as part of my codecademy full-stack course."}),Object(l.jsx)("p",{className:"aboutPara",children:"This web app is fully functional.  It allows users to create an account, login in and out, view and update theirm account, create orders and view their past orders."}),Object(l.jsx)("p",{className:"aboutPara",children:"I have used the following in the development of this app:"}),Object(l.jsxs)("ul",{children:[Object(l.jsx)("li",{className:"aboutList",children:"React"}),Object(l.jsx)("li",{className:"aboutList",children:"React Router"}),Object(l.jsx)("li",{className:"aboutList",children:"Redux"}),Object(l.jsx)("li",{className:"aboutList",children:"NodeJS Express"}),Object(l.jsx)("li",{className:"aboutList",children:"Postgres SQL"})]}),Object(l.jsx)("h2",{className:"aboutHeader",children:"How to Use"}),Object(l.jsx)("p",{className:"aboutPara",children:"First of all, you should register for an account.  There is no need for you to use your actual email, name or address details - this site is only for demo purposes and therefore no personal data should be entered.  You will then be able to log in and logout, place orders, add and remove addresses, view your orders and change your password."})]})}),V=(a(86),function(e){var t=Object(o.c)((function(e){return e.stockReducer})),a=Object(o.c)((function(e){return e.cartReducer})),c=t.find((function(t){return t.id===e.product.id})),n=c.id,s=c.title,r=c.price,i=c.image,d=t.find((function(e){return e.id==n})),u=0;a.map((function(e){e.id===n&&(u+=e.qty)}));var j=Object(o.b)(),b=function(){var e=0;a.length>0?(a.map((function(a){if(a.qty>0){var c=t.find((function(e){return e.id==a.id}));e+=a.qty*c.price}})),j(f(e))):j(f(0))};return u<1?null:Object(l.jsxs)("div",{className:"basketItem",children:[Object(l.jsx)("img",{className:"bs-img",src:i,alt:s}),Object(l.jsxs)("div",{className:"bs-details",children:[Object(l.jsx)("h3",{children:s}),Object(l.jsxs)("p",{children:["\xa3",r," x ",u," = \xa3",r*u]})]}),Object(l.jsxs)("div",{className:"bs-qty-container",children:[Object(l.jsx)("p",{className:"bs-qty-tag",children:"Quantity"}),Object(l.jsxs)("div",{className:"bs-qty",children:[Object(l.jsx)("button",{onClick:function(){return function(){var t=d.quantity;if(u<t){var a=e.product;a.qty=u+1,j(h(a)),b()}}()},className:"bs-qtyBtn",children:"+"}),Object(l.jsx)("p",{className:"bs-qty-no",children:u}),Object(l.jsx)("button",{onClick:function(){return function(){var t=e.product;t.qty=u-1,j(m(t)),b()}()},className:"bs-qtyBtn",children:"-"})]})]}),Object(l.jsx)("div",{className:"bs-del-container",children:Object(l.jsx)("i",{class:"fas fa-trash fa-2x bs-del",onClick:function(){return function(){var t=e.product;t.qty=0,j(m(t)),b()}()}})})]},n)}),z=(a(26),function(){var e=Object(o.c)((function(e){return e.tokenReducer})),t=Object(c.useState)(NaN),a=Object(p.a)(t,2),n=a[0],s=a[1],r=Object(c.useState)(""),i=Object(p.a)(r,2),d=i[0],u=i[1],h=Object(c.useState)([]),m=Object(p.a)(h,2),O=m[0],x=m[1],v=Object(c.useState)(!0),g=Object(p.a)(v,2),N=g[0],y=g[1],w=Object(c.useState)(!1),k=Object(p.a)(w,2),C=k[0],S=k[1],P=Object(o.c)((function(e){return e.cartReducer})),T=Object(o.c)((function(e){return e.amountToPayReducer})),R=Object(o.b)();Object(c.useEffect)(Object(b.a)(j.a.mark((function e(){var t,a,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E();case 3:return t=e.sent,e.next=6,t;case 6:a=e.sent,c=a.addresses,x(c),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,11]])}))),[]);var E=function(){var t=Object(b.a)(j.a.mark((function t(){var a,c,n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=e.accessToken,e.refreshToken,t.next=4,D()({method:"post",headers:{authorization:"Bearer ".concat(a)},url:_});case 4:return c=t.sent,t.next=7,c.data;case 7:return n=t.sent,t.abrupt("return",n);case 11:t.prev=11,t.t0=t.catch(0),console.error(t.t0.message);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}(),B=document.createElement("link");B.rel="stylesheet",B.href="https://cdn.jsdelivr.net/npm/semantic-ui/dist/semantic.min.css",document.head.appendChild(B);var I=function(){var t=Object(b.a)(j.a.mark((function t(a){var c,s;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),S(!1),y(!1),t.prev=3,c=e.accessToken,e.refreshToken,t.next=7,D()({method:"post",data:{cart:P,address_id:n,name:d,price:T},headers:{authorization:"Bearer ".concat(c)},url:q});case 7:return s=t.sent,t.next=10,s.data;case 10:"Success"===t.sent&&(y(!0),S(!0),R({type:"cart/empty"}),R(f(0))),t.next=19;break;case 14:t.prev=14,t.t0=t.catch(3),console.error(t.t0.message),S(!0),y(!1);case 19:case 20:case"end":return t.stop()}}),t,null,[[3,14]])})));return function(e){return t.apply(this,arguments)}}(),A=[];O.map((function(e){var t={};return t.key=e.id,t.id=e.id,t.text=e.address_1,t.value="".concat(e.address_1," ").concat(e.pass_code),A.push(t),t}));var L=!isNaN(n)&&d.length>2?Object(l.jsx)("button",{className:"cc-btn cc-submit",children:"Submit Order"}):Object(l.jsx)("button",{className:"cc-btn cc-submit btn-disabled",disabled:!0,children:"Submit Order"});return Object(l.jsxs)("form",{className:"cc-form",onSubmit:function(e){return I(e)},children:[Object(l.jsxs)("div",{className:"cc-your-details",children:[Object(l.jsxs)("div",{className:"cc-details-left",children:[Object(l.jsx)("h4",{className:"cc-heading",children:"Delivery Address:"}),Object(l.jsxs)("div",{className:"your-details-container",children:[Object(l.jsxs)("div",{className:"card-row",children:[Object(l.jsx)("input",{className:"cc-input",type:"text",id:"name",placeholder:"Full name",onChange:function(e){return u(e.target.value)}}),Object(l.jsx)("label",{className:"cc-label",children:"Full Name of Addressee"})]}),Object(l.jsxs)("select",{className:"cc-select",onChange:function(e){return s(e.target.value)},children:[Object(l.jsx)("option",{value:NaN,children:"--SELECT ADDRESS--"}),A.map((function(e){return Object(l.jsx)("option",{value:e.id,children:e.text},e.key)}))]})]})]}),Object(l.jsxs)("div",{className:"cc-details-right",children:[Object(l.jsx)("h4",{className:"cc-heading",children:"Credit Card Details:"}),Object(l.jsx)("p",{children:"Please note: this is a demo app.   No credit card details will be submitted."}),Object(l.jsxs)("div",{className:"card-row",children:[Object(l.jsx)("input",{className:"cc-input",type:"text",defaultValue:"J. Bloggs",id:"name",placeholder:"Name on the card"}),Object(l.jsx)("label",{className:"cc-label",for:"name",children:"Name on the card"})]}),Object(l.jsxs)("div",{className:"card-row",children:[Object(l.jsx)("input",{className:"cc-input",id:"ccn",type:"tel",inputmode:"numeric",autocomplete:"cc-number",maxlength:"19",placeholder:"xxxx xxxx xxxx xxxx",defaultValue:"1234123412341234"}),Object(l.jsx)("label",{className:"cc-label",for:"ccn",children:"Credit Card Number"})]}),Object(l.jsxs)("div",{className:"card-col",children:[Object(l.jsxs)("div",{className:"card-row exp-cvv",children:[Object(l.jsx)("input",{className:"cc-input",id:"cvv",type:"tel",inputmode:"numeric",maxlength:"4",placeholder:"xxx",defaultValue:"123"}),Object(l.jsx)("label",{className:"cc-label",for:"ccv",children:"Expiration Date"})]}),Object(l.jsxs)("div",{className:"card-row exp-cvv",children:[Object(l.jsx)("input",{className:"cc-input",id:"cvv",type:"tel",inputmode:"numeric",maxlength:"4",placeholder:"xx / xx",defaultValue:"12/25"}),Object(l.jsx)("label",{className:"cc-label",for:"cvv",children:"CVV"})]})]})]})]}),C&&!N?Object(l.jsx)("div",{className:"cc-btn-container",children:Object(l.jsx)("h2",{className:"red",children:"Order Unsuccessful - Please contact Customer Services"})}):null,C&&N?Object(l.jsx)("div",{className:"cc-btn-container",children:Object(l.jsx)("h2",{className:"green",children:"Order Completed - Thank you for your custom"})}):null,T>0?Object(l.jsx)("div",{className:"cc-btn-container",children:L}):null]})}),U=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.amountToPayReducer})),a=Object(o.c)((function(e){return e.cartReducer})),n=Object(o.c)((function(e){return e.stockReducer})),s=Object(o.c)((function(e){return e.loginReducer})),r=Object(i.f)();return s||r.push("/login"),Object(c.useEffect)((function(){s?function(){var t=0;a.length>0?(a.map((function(e){if(e.qty>0){var a=n.find((function(t){return t.id==e.id}));t+=e.qty*a.price}})),e(f(t))):e(f(0))}():r.push("/login")}),[]),Object(l.jsxs)("div",{className:"bs-page",children:[Object(l.jsx)("h2",{className:"bs-heading",children:"Basket"}),a.length>0?a.map((function(e){return Object(l.jsx)(V,{product:e})})):null,Object(l.jsx)("div",{className:"amount-to-pay",children:Object(l.jsxs)("h2",{children:["Amount to Pay : \xa3",t]})}),s?Object(l.jsx)(z,{}):null]})},H=(a(87),function(){var e=Object(c.useState)(!0),t=Object(p.a)(e,2),a=t[0],n=t[1],s=Object(c.useState)(!1),r=Object(p.a)(s,2),d=r[0],u=r[1],h=Object(c.useState)(!1),m=Object(p.a)(h,2),O=m[0],f=m[1],v=Object(c.useState)(!0),g=Object(p.a)(v,2),N=g[0],y=g[1],w=Object(o.b)(),k=Object(i.f)(),_=function(){var e=Object(b.a)(j.a.mark((function e(t){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n(!0),y(!0),u(!1),f(!1),t.target.email.value!==t.target.conf_email.value&&n(!1),t.target.password.value!==t.target.conf_password.value&&t.target.password.value.lenght>8&&y(!1),e.prev=9,!a||!N){e.next=19;break}return e.next=13,D()({method:"post",data:{first_name:t.target.first_name.value,last_name:t.target.last_name.value,email:t.target.email.value,password:t.target.password.value,address_1:t.target.address_1.value,address_2:t.target.address_2.value,postal_town:t.target.postal_town.value,post_code:t.target.post_code.value,country:t.target.country.value},url:R});case 13:c=e.sent,w({type:"login/login"}),w(x(c.data)),k.push("/account"),e.next=20;break;case 19:f(!0);case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(9),f(!0);case 25:case"end":return e.stop()}}),e,null,[[9,22]])})));return function(t){return e.apply(this,arguments)}}();return Object(l.jsx)("div",{className:"login-container",children:Object(l.jsxs)("form",{onSubmit:function(e){return _(e)},children:[Object(l.jsx)("h3",{children:"New Customer - Register"}),d?Object(l.jsx)("p",{className:"red",children:"It looks like this email address already exists!"}):null,O?Object(l.jsx)("p",{className:"red",children:"There was a problem with your registration.  Please contact customer support."}):null,a?null:Object(l.jsx)("p",{className:"red",children:"Emails do not match... Please try again!"}),N?null:Object(l.jsx)("p",{className:"red",children:"Passwords must be more than 8 digits and must match ... Please try again!"}),Object(l.jsxs)("div",{className:"login-row",children:[Object(l.jsxs)("div",{className:"login-col",children:[Object(l.jsx)("input",{className:"login-input",type:"email",pattern:"[^ @]*@[^ @]*",id:"email",placeholder:"Email"}),Object(l.jsx)("label",{className:"login-label",for:"email",children:"Email "})]}),Object(l.jsxs)("div",{className:"login-col",children:[Object(l.jsx)("input",{className:"login-input",type:"email",pattern:"[^ @]*@[^ @]*",id:"conf_email",placeholder:"Confirm Email"}),Object(l.jsx)("label",{className:"login-label",for:"conf-email",children:"Confirm Email"})]})]}),Object(l.jsxs)("div",{className:"login-row",children:[Object(l.jsxs)("div",{className:"login-col",children:[Object(l.jsx)("input",{className:"login-input",type:"password",id:"password",placeholder:"Password"}),Object(l.jsx)("label",{className:"login-label",for:"password",children:"Password"})]}),Object(l.jsxs)("div",{className:"login-col",children:[Object(l.jsx)("input",{className:"login-input",type:"password",id:"conf_password",placeholder:"Confirm Password"}),Object(l.jsx)("label",{className:"login-label",for:"password",children:" Confirm Password"})]})]}),Object(l.jsx)("h4",{children:"Name & Address Details:"}),Object(l.jsxs)("div",{className:"login-col",children:[Object(l.jsxs)("div",{className:"login-row add-row start-row",children:[Object(l.jsx)("label",{className:"add-label",for:"first_name",children:"First Name"}),Object(l.jsx)("input",{className:"login-input add-input",type:"text",name:"first_name",id:"first_name",required:!0})]}),Object(l.jsxs)("div",{className:"login-row add-row add-row",children:[Object(l.jsx)("label",{className:"add-label",for:"last_name",children:"Last Name"}),Object(l.jsx)("input",{className:"login-input add-input",type:"text",name:"last_name",id:"last_name",required:!0})]}),Object(l.jsxs)("div",{className:"login-row add-row add-row",children:[Object(l.jsx)("label",{className:"add-label",for:"address_1",children:"First line"}),Object(l.jsx)("input",{className:"login-input add-input",type:"text",name:"address_1",id:"address_1",required:!0})]}),Object(l.jsxs)("div",{className:"login-row add-row",children:[Object(l.jsx)("label",{className:"add-label",for:"address_2",children:"Second line (optional)"}),Object(l.jsx)("input",{className:"login-input add-input",type:"text",name:"address_2",id:"address_2"})]}),Object(l.jsxs)("div",{className:"login-row add-row",children:[Object(l.jsx)("label",{className:"add-label",for:"postal_town",children:"Postal Town"}),Object(l.jsx)("input",{className:"login-input add-input",type:"text",name:"postal_town",id:"postal_town",required:!0})]}),Object(l.jsxs)("div",{className:"login-row add-row",children:[Object(l.jsx)("label",{className:"add-label",for:"post_code",children:"Post Code"}),Object(l.jsx)("input",{className:"login-input add-input",type:"text",name:"post_code",id:"post_code",required:!0})]}),Object(l.jsxs)("div",{className:"login-row add-row",children:[Object(l.jsx)("label",{className:"add-label",for:"country",children:"Country"}),Object(l.jsx)("input",{className:"login-input add-input",type:"text",name:"country",id:"country",required:!0})]})]}),Object(l.jsx)("input",{type:"submit",className:"login-btn login-submit"})]})})}),M=function(){var e=Object(c.useState)(!1),t=Object(p.a)(e,2),a=t[0],n=t[1],s=Object(o.b)(),r=Object(i.f)(),d=function(){var e=Object(b.a)(j.a.mark((function e(t){var a,c,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(!1),t.preventDefault(),e.prev=2,a=t.target.email.value,c=t.target.password.value,e.next=7,D()({method:"post",url:k,data:{email:a,password:c}});case 7:i=e.sent,s({type:"login/login"}),s(x(i.data)),r.push("/"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),n(!0);case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(l.jsxs)("div",{className:"login-container",children:[Object(l.jsxs)("form",{onSubmit:function(e){return d(e)},children:[Object(l.jsx)("h3",{children:"Existing Customer - Log In"}),Object(l.jsxs)("div",{className:"login-row",children:[Object(l.jsxs)("div",{className:"login-col",children:[Object(l.jsx)("input",{className:"login-input",type:"text",id:"email",placeholder:"Email Address",required:!0}),Object(l.jsx)("label",{className:"login-label",for:"email",children:"Email Address"})]}),Object(l.jsxs)("div",{className:"login-col",children:[Object(l.jsx)("input",{className:"login-input",type:"password",id:"password",placeholder:"Password",required:!0}),Object(l.jsx)("label",{className:"login-label",for:"password",children:"Password"})]})]}),Object(l.jsx)("button",{type:"submit",className:"login-btn login-submit",children:"Log In"})]}),a?Object(l.jsx)("p",{className:"denied",children:" Login unsuccessful.  Please check your details and try again"}):null]})},J=function(){var e=Object(c.useState)(!1),t=Object(p.a)(e,2),a=t[0],n=t[1],s=a?"Existing Customer Login":"New Customer Registration";return Object(l.jsxs)("div",{className:"login-page",children:[a?Object(l.jsx)(H,{}):Object(l.jsx)(M,{}),Object(l.jsx)("button",{onClick:function(){n(!a)},className:"login-btn",children:s})]})},X=a(14),Q=(a(20),function(e){var t=Object(c.useState)(!1),a=Object(p.a)(t,2),n=a[0],s=a[1],r=Object(o.c)((function(e){return e.tokenReducer})),i=e.address,d=i.id,u=i.address_1,h=i.address_2,m=i.postal_town,O=i.post_code,x=i.country,f=function(){var e=Object(b.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.accessToken,e.next=3,D()({method:"DELETE",headers:{authorization:"Bearer ".concat(a)},data:{address_id:t},url:P});case 3:e.sent,window.location.reload(!0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(b.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=r.accessToken,e.next=4,D()({method:"post",headers:{authorization:"Bearer ".concat(a)},data:{address_key:d,address_1:t.target.address_1.value,address_2:t.target.address_2.value,postal_town:t.target.postal_town.value,post_code:t.target.post_code.value,country:t.target.country.value},url:T});case 4:window.location.reload(!0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return n?Object(l.jsx)("form",{onSubmit:function(e){return v(e)},children:Object(l.jsxs)("div",{className:"address",children:[Object(l.jsx)("input",{type:"text",id:"address_1",defaultValue:u,placeholder:"First line"}),Object(l.jsx)("input",{type:"text",id:"address_2",defaultValue:h,placeholder:"Second line (optional)"}),Object(l.jsx)("input",{type:"text",id:"postal_town",defaultValue:m,placeholder:"Town/City"}),Object(l.jsx)("input",{type:"text",id:"post_code",defaultValue:O,placeholder:"Post Code"}),Object(l.jsx)("input",{type:"text",id:"country",defaultValue:x,placeholder:"Country"}),Object(l.jsx)("button",{className:"add-update",children:"Submit Change"}),Object(l.jsx)("button",{className:"add-cancel",onClick:function(){return s(!1)},children:"Cancel"})]},d)}):Object(l.jsxs)("div",{className:"address",children:[Object(l.jsxs)("form",{children:[Object(l.jsxs)("p",{children:["First line: ",u]}),Object(l.jsxs)("p",{children:["Second line: ",h]}),Object(l.jsxs)("p",{children:["Postal Town: ",m]}),Object(l.jsxs)("p",{children:["Post Code: ",O]}),Object(l.jsxs)("p",{children:["Country: ",x]}),Object(l.jsx)("button",{className:"add-update",onClick:function(){return s(!0)},children:"Update"})]}),Object(l.jsx)("button",{onClick:function(){return f(d)},className:"add-delete",children:"Delete"})]},d)}),Y=function(){var e=Object(o.c)((function(e){return e.tokenReducer})),t=function(){var t=Object(b.a)(j.a.mark((function t(a){var c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),c=e.accessToken,e.refreshToken,t.next=4,D()({method:"post",headers:{authorization:"Bearer ".concat(c)},data:{address_1:a.target.address_1.value,address_2:a.target.address_2.value,postal_town:a.target.postal_town.value,post_code:a.target.post_code.value,country:a.target.country.value},url:S});case 4:window.location.reload(!0);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(l.jsx)("div",{className:"address",children:Object(l.jsxs)("form",{onSubmit:function(e){return t(e)},children:[Object(l.jsx)("input",{type:"text",id:"address_1",placeholder:"First line"}),Object(l.jsx)("input",{type:"text",id:"address_2",placeholder:"Second line (optional)"}),Object(l.jsx)("input",{type:"text",id:"postal_town",placeholder:"Town/City"}),Object(l.jsx)("input",{type:"text",id:"post_code",placeholder:"Post Code"}),Object(l.jsx)("input",{type:"text",id:"country",placeholder:"Country"}),Object(l.jsx)("button",{type:"submit",className:"add-update",children:"Submit Change"})]})})},G=function(e){var t="/order/".concat(e.id),a=Object(i.f)();return Object(l.jsxs)("div",{className:"address",children:[Object(l.jsxs)("p",{children:["Order No: ",e.id]}),Object(l.jsxs)("p",{children:["Date Placed: ",e.dateCreated.substring(0,10)]}),Object(l.jsxs)("p",{children:["Total Paid: \xa3",e.price]}),Object(l.jsxs)("p",{children:["Current Status: ",e.status]}),Object(l.jsx)("button",{onClick:function(e){return function(e){e.preventDefault(),a.push(t)}(e)},className:"add-update",children:"More Info"})]},e.id)},K=(a(88),function(){var e=Object(c.useState)([]),t=Object(p.a)(e,2),a=t[0],n=t[1],s=Object(c.useState)([]),r=Object(p.a)(s,2),d=r[0],u=r[1],h=Object(c.useState)({}),m=Object(p.a)(h,2),O=m[0],x=m[1],f=Object(c.useState)(!1),v=Object(p.a)(f,2),g=v[0],N=v[1],y=Object(c.useState)(!1),w=Object(p.a)(y,2),k=w[0],S=w[1],P=Object(c.useState)(null),T=Object(p.a)(P,2),R=T[0],q=T[1],E=Object(i.f)(),B=Object(o.c)((function(e){return e.tokenReducer})),I=Object(o.b)(),A=function(){var e=Object(b.a)(j.a.mark((function e(t){var a,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t.accessToken,e.next=4,D()({method:"post",headers:{authorization:"Bearer ".concat(a)},url:_});case 4:c=e.sent,n(c.data.addresses),x(c.data.basic_data),u(c.data.order_data),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){A(B)}),[]);var L=function(){var e=Object(b.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),q(null),a=B.accessToken,t.target.new_password.value!==t.target.conf_password.value){e.next=17;break}return e.prev=4,e.next=7,D()({method:"put",headers:{authorization:"Bearer ".concat(a)},data:{curr_password:t.target.curr_password.value,password:t.target.new_password.value},url:C});case 7:e.sent,q("Password Updated Sucessfully"),setTimeout((function(){return S(!1)}),3e3),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),q("Password not updated!  Please ensure you've entered the correct password");case 15:e.next=18;break;case 17:q("Passwords do not match! Please try again");case 18:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:I({type:"login/logout"}),I({type:"cart/empty"}),I({type:"token/delete"}),E.push("/");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(l.jsxs)("div",{className:"account-page",children:[Object(l.jsx)("h2",{className:"account-top-header",children:"My Account"}),Object(l.jsx)("button",{onClick:function(){return F()},className:"navBtn",children:"Log Out"}),Object(l.jsxs)("div",{className:"account-basics",children:[Object(l.jsx)("h3",{children:"Basic Details"}),Object(l.jsxs)("p",{children:["Name: ","".concat(O.first_name," ").concat(O.last_name)]}),Object(l.jsxs)("p",{children:["Email: ",O.email]}),k?function(){var e,t,a;return Object(l.jsx)("div",{className:"address",children:Object(l.jsxs)("form",{onSubmit:function(e){return L(e)},children:[Object(l.jsx)("input",(e={type:"text"},Object(X.a)(e,"type","password"),Object(X.a)(e,"id","curr_password"),Object(X.a)(e,"placeholder","Current Password"),e)),Object(l.jsx)("input",(t={type:"text"},Object(X.a)(t,"type","password"),Object(X.a)(t,"id","new_password"),Object(X.a)(t,"placeholder","New Password"),t)),Object(l.jsx)("input",(a={type:"text"},Object(X.a)(a,"type","password"),Object(X.a)(a,"id","conf_password"),Object(X.a)(a,"placeholder","Confirm New Password"),a)),R?Object(l.jsx)("p",{children:R}):null,Object(l.jsx)("button",{className:"add-update",children:"Submit Change"})]})})}():null,Object(l.jsx)("button",{onClick:function(){return S(!k),void q(null)},className:"account-btn",children:k?"Cancel":"Change Password"})]}),Object(l.jsx)("h2",{children:"Addresses:"}),Object(l.jsxs)("div",{children:[Object(l.jsxs)("div",{className:"address-container",children:[a.length>=1?a.map((function(e){return Object(l.jsx)(Q,{address:e},e.id)})):null,g?Object(l.jsx)(Y,{}):null]}),g?null:Object(l.jsx)("button",{className:"account-btn",onClick:function(){N(!0)},children:"Add an Address"})]}),Object(l.jsx)("h2",{className:"order-header",children:"Past Orders:"}),Object(l.jsx)("div",{children:Object(l.jsx)("div",{className:"address-container",children:d.length>=1?d.map((function(e){return Object(l.jsx)(G,{id:e.id,dateCreated:e.date_created,price:e.price,status:e.status},e.id)})):null})})]})}),W=function(e){var t=e.item,a=e.stock;return Object(l.jsxs)("div",{className:"basketItem",children:[Object(l.jsx)("img",{className:"bs-img",src:a.image,alt:a.title}),Object(l.jsxs)("div",{className:"bs-details",children:[Object(l.jsx)("h2",{children:a.title}),Object(l.jsxs)("h4",{children:["\xa3",a.price," x ",t.quantity," = \xa3",a.price*t.quantity]})]}),Object(l.jsx)("div",{className:"bs-qty-container",children:Object(l.jsx)("div",{className:"bs-qty"})})]},t.order_id)},Z=(a(89),function(e){var t=e.match,a=Object(c.useState)({}),n=Object(p.a)(a,2),s=n[0],r=n[1],d=Object(c.useState)([]),u=Object(p.a)(d,2),h=u[0],m=u[1],O=Object(o.c)((function(e){return e.tokenReducer})),x=Object(o.c)((function(e){return e.stockReducer})),f=Object(i.f)(),v=function(){var e=Object(b.a)(j.a.mark((function e(){var a,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=O.accessToken,e.next=4,D()({method:"post",data:{order_id:t.params.id},headers:{authorization:"Bearer ".concat(a)},url:E});case 4:return c=e.sent,e.t0=r,e.next=8,c.data.order;case 8:return e.t1=e.sent,(0,e.t0)(e.t1),e.t2=m,e.next=13,c.data.order_items;case 13:e.t3=e.sent,(0,e.t2)(e.t3),e.next=20;break;case 17:e.prev=17,e.t4=e.catch(0),console.error(e.t4.message);case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)(Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:case"end":return e.stop()}}),e)}))),[]);var g=s.id,N=(s.addressee_name,s.date_created,s.status),y=Number(s.price).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");return Object(l.jsxs)("div",{className:"order-page",children:[Object(l.jsx)("h2",{children:"Order Details"}),h.map((function(e){var t=x.filter((function(t){return t.id===e.stock_id}));return Object(l.jsx)(W,{item:e,stock:t[0]})})),Object(l.jsxs)("h3",{children:["Order No: ",g]}),Object(l.jsxs)("h3",{children:["Total Paid: \xa3",y]}),Object(l.jsxs)("h3",{children:["Status: ",N]}),Object(l.jsx)("button",{onClick:function(){return f.push("/account")},className:"order-back",children:" Back to Account Page"})]})});var $=function(){return Object(l.jsx)(L.a,{children:Object(l.jsxs)("div",{className:"page",children:[Object(l.jsx)(d,{}),Object(l.jsxs)(i.c,{children:[Object(l.jsx)(i.a,{path:"/",exact:!0,component:I}),Object(l.jsx)(i.a,{path:"/about",component:F}),Object(l.jsx)(i.a,{path:"/basket",component:U}),Object(l.jsx)(i.a,{path:"/login",component:J}),Object(l.jsx)(i.a,{path:"/account",component:K}),Object(l.jsx)(i.a,{path:"/order/:id",component:Z}),Object(l.jsx)(i.a,{path:"/:id",component:A})]})]})})},ee=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,93)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),c(e),n(e),s(e),r(e)}))},te=a(16),ae=a(42),ce=[],ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"cart/addNewCartItem":var a={id:t.payload.id,qty:1};return[].concat(Object(ae.a)(e),[a]);case"cart/incrementCartItem":var c=t.payload.id;return e.map((function(e){return e.id===c&&(e=t.payload),e}));case"cart/decrementCartItem":var n=t.payload.id;return e.map((function(e){return e.id===n&&(e=t.payload),e}));case"cart/deleteCartItem":return e.filter((function(e){return e.id!==t.payload.id}));case"cart/empty":return[];default:return e}},se=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"login/login":return!0;case"login/logout":return!1;default:return e}},re=[],ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"stock/loadStock":return t.payload;default:return e}},oe=[],le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"token/addTokens":return t.payload;case"token/delete":return[];default:return e}},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"amountToPay/update":return t.payload;default:return e}},ue=Object(te.a)({cartReducer:ne,loginReducer:se,stockReducer:ie,tokenReducer:le,amountToPayReducer:de}),je=a(29),be=a(40),pe=a.n(be),he=a(41),me={key:"root",storage:pe.a},Oe=Object(je.a)(me,ue),xe=Object(te.b)(Oe,{authenticated:!1},window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),fe=Object(je.b)(xe);r.a.render(Object(l.jsx)(o.a,{store:xe,children:Object(l.jsx)(he.a,{loading:null,persistor:fe,children:Object(l.jsx)(n.a.StrictMode,{children:Object(l.jsx)($,{})})})}),document.getElementById("root")),ee()}},[[92,1,2]]]);
//# sourceMappingURL=main.2a8b067d.chunk.js.map